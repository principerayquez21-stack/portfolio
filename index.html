<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Lab Test</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: #0f172a; color: white; }
        .box { background: #1e293b; padding: 20px; border-radius: 8px; border: 1px solid #334155; }
        textarea { width: 100%; padding: 10px; margin-top: 10px; background: #334155; color: white; border: none; }
        button { background: #38bdf8; color: #0f172a; padding: 10px 20px; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        #result { margin-top: 20px; padding: 10px; border: 1px dashed #38bdf8; min-height: 50px; }
    </style>
</head>
<body>

    <h2>Project 3: Prompt Lab Test</h2>
    <div class="box">
        <p>Testing connection with model: <strong>google/flan-t5-large</strong></p>
        <textarea id="labInput" placeholder="Type a question (e.g., What is AI?)"></textarea>
        <button onclick="testPrompt()" id="labBtn">Generate Response</button>
        <div id="result">Response will appear here...</div>
    </div>

    <script type="module">
        import { HfInference } from 'https://cdn.jsdelivr.net/npm/@huggingface/inference@2.6.4/+esm';

        // YOUR TOKEN (I put the jCLV one here)
        const tokenPart1 = "hf_";
        const tokenPart2 = "jCLVzMvgViDMVIPopGDUHIgIvBTNeykov"; 
        const HF_TOKEN = tokenPart1 + tokenPart2;

        const hf = new HfInference(HF_TOKEN);

        window.testPrompt = async () => {
            const input = document.getElementById('labInput').value;
            const resultDiv = document.getElementById('result');
            const btn = document.getElementById('labBtn');

            if (!input) return alert("Enter a prompt!");

            resultDiv.innerText = "Attempting to connect...";
            btn.innerText = "Working...";

            try {
                // We are asking for a simple text generation
                const out = await hf.textGeneration({
                    model: 'google/flan-t5-large',
                    inputs: input,
                    parameters: { max_new_tokens: 100 }
                });
                
                // If we get here, it worked!
                resultDiv.innerText = out.generated_text;
                
            } catch (e) {
                console.error(e);
                // This will print the EXACT error to the screen so we don't need the console
                resultDiv.innerText = "FAILED: " + e.message;
            } finally {
                btn.innerText = "Generate Response";
            }
        };
    </script>
</body>
</html>
